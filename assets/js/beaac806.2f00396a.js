(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[16],{4856:function(e,n,t){"use strict";t.r(n),t.d(n,{frontMatter:function(){return d},metadata:function(){return p},toc:function(){return u},default:function(){return m}});var a=t(2122),i=t(9756),o=(t(7294),t(3905)),l=t(1395),s=t(8215),r=["components"],d={sidebar_position:1},p={unversionedId:"reference/server",id:"reference/server",isDocsHomePage:!1,title:"Server SDKs (Back-end)",description:"The server-side SDKs allow you to trigger sending notifications. Supported environments:",source:"@site/docs/reference/server.md",sourceDirName:"reference",slug:"/reference/server",permalink:"/docs/reference/server",editUrl:"https://github.com/notificationapi-com/docs/edit/main/docs/reference/server.md",version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Display In-App Notifications",permalink:"/docs/quick-start/display-inapp-notifications"},next:{title:"JS Client SDK (Front-End)",permalink:"/docs/reference/js-client"}},u=[{value:"Installation",id:"installation",children:[]},{value:"Basic Usage",id:"basic-usage",children:[{value:"1. import or require",id:"1-import-or-require",children:[]},{value:"2. init",id:"2-init",children:[]},{value:"3. send",id:"3-send",children:[]}]},{value:"Merge Tags: Dynamically values in notifications",id:"merge-tags-dynamically-values-in-notifications",children:[]},{value:"Options: Additional Email Features",id:"options-additional-email-features",children:[]},{value:"Retract: unsending or deleting notifications",id:"retract-unsending-or-deleting-notifications",children:[]},{value:"SecondaryId: categorizing notifications of the same type",id:"secondaryid-categorizing-notifications-of-the-same-type",children:[]}],c={toc:u};function m(e){var n=e.components,t=(0,i.Z)(e,r);return(0,o.kt)("wrapper",(0,a.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"The server-side SDKs allow you to trigger sending notifications. Supported environments:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Node.js"),(0,o.kt)("li",{parentName:"ul"},"Python")),(0,o.kt)("h2",{id:"installation"},"Installation"),(0,o.kt)(l.Z,{groupId:"back-end-language",defaultValue:"nodejs",values:[{label:"Node.js",value:"nodejs"},{label:"Python",value:"python"}],mdxType:"Tabs"},(0,o.kt)(s.Z,{value:"nodejs",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm install notificationapi-node-server-sdk\n# Or using Yarn:\nyarn add notificationapi-node-server-sdk\n"))),(0,o.kt)(s.Z,{value:"python",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"pip install notificationapi_python_server_sdk\n")))),(0,o.kt)("h2",{id:"basic-usage"},"Basic Usage"),(0,o.kt)("h3",{id:"1-import-or-require"},"1. import or require"),(0,o.kt)(l.Z,{groupId:"back-end-language",defaultValue:"nodejs",values:[{label:"Node.js",value:"nodejs"},{label:"Python",value:"python"}],mdxType:"Tabs"},(0,o.kt)(s.Z,{value:"nodejs",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'import notificationapi from "notificationapi-node-server-sdk";\n// or with require:\nconst notificationapi = require("notificationapi-node-server-sdk").default;\n'))),(0,o.kt)(s.Z,{value:"python",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},"from notificationapi_python_server_sdk import (notificationapi)\n")))),(0,o.kt)("h3",{id:"2-init"},"2. init"),(0,o.kt)("p",null,"The init function is to configure the SDK and must run before the ",(0,o.kt)("a",{parentName:"p",href:"#3-send"},"send")," function. It requires your ",(0,o.kt)("inlineCode",{parentName:"p"},"clientId")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"clientSecret")," which you can get from ",(0,o.kt)("a",{parentName:"p",href:"https://app.notificationapi.com/environments"},"here"),"."),(0,o.kt)(l.Z,{groupId:"back-end-language",defaultValue:"nodejs",values:[{label:"Node.js",value:"nodejs"},{label:"Python",value:"python"}],mdxType:"Tabs"},(0,o.kt)(s.Z,{value:"nodejs",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'notificationapi.init("CLIENT_ID", "CLIENT_SECRET");\n'))),(0,o.kt)(s.Z,{value:"python",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'notificationapi.init("CLIENT_ID", "CLIENT_SECRET")\n')))),(0,o.kt)("h3",{id:"3-send"},"3. send"),(0,o.kt)("p",null,"The code sample below will send the ",(0,o.kt)("inlineCode",{parentName:"p"},"hello_world")," notification to the specified user."),(0,o.kt)(l.Z,{groupId:"back-end-language",defaultValue:"nodejs",values:[{label:"Node.js",value:"nodejs"},{label:"Python",value:"python"}],mdxType:"Tabs"},(0,o.kt)(s.Z,{value:"nodejs",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'notificationapi.send({\n  notificationId: "hello_world",\n  user: { id: "123", email: "test@test.com" }\n});\n'))),(0,o.kt)(s.Z,{value:"python",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'notificationapi.send({\n    "notificationId": "hello_world",\n    "user": { "id": "123", "email": "test@test.com" } \n})\n')))),(0,o.kt)("p",null,"Parameters:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"notificationId")," (string): The ID of the notification you wish to send. You can find this value from the dashboard."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"user.id")," (string): The ID of the user in your system."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"user.email")," (string): User's email address.")),(0,o.kt)("p",null,"Below you can find additional parameters and use-cases."),(0,o.kt)("h2",{id:"merge-tags-dynamically-values-in-notifications"},"Merge Tags: Dynamically values in notifications"),(0,o.kt)("p",null,"If you are using ",(0,o.kt)("inlineCode",{parentName:"p"},"{{mergeTags}}")," in your notification designs, be sure to pass the actual values into the SDK. The example below replaces the ",(0,o.kt)("inlineCode",{parentName:"p"},"{{firstName}}")," merge tag in your design with the value ",(0,o.kt)("inlineCode",{parentName:"p"},"Jane"),"."),(0,o.kt)(l.Z,{groupId:"back-end-language",defaultValue:"nodejs",values:[{label:"Node.js",value:"nodejs"},{label:"Python",value:"python"}],mdxType:"Tabs"},(0,o.kt)(s.Z,{value:"nodejs",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"notificationapi.send({\n    notificationId: 'hello_world'\n    user: { id: \"123\", email: \"test@test.com\" },\n    mergeTags: { firstName: 'Jane' }\n})\n"))),(0,o.kt)(s.Z,{value:"python",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'notificationapi.send({\n    "notificationId": "hello_world",\n    "user": { "id": "123", "email": "test@test.com" },\n    "mergeTags": { "firstName": "Jane" }\n})\n')))),(0,o.kt)("p",null,"You can actually pass in complex objects and arrays into mergeTags to make your notifications future-proof. The example below sends a whole user object to the mergeTag. You can now use merge tags such as ",(0,o.kt)("inlineCode",{parentName:"p"},"{{user.firstName}}"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"{{user.lastName}}")," or even ",(0,o.kt)("inlineCode",{parentName:"p"},"{{user.orders[1].productName}}")," in the designs without going back to change your server code."),(0,o.kt)(l.Z,{groupId:"back-end-language",defaultValue:"nodejs",values:[{label:"Node.js",value:"nodejs"},{label:"Python",value:"python"}],mdxType:"Tabs"},(0,o.kt)(s.Z,{value:"nodejs",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"const user = {\n    firstName: 'Jane',\n    lastName: 'Doe',\n    orders: [\n        {\n            id: '123',\n            productName: 'socks'\n        },\n        {\n            id: '124',\n            productName: 'socks'\n        }\n    ]\n}\nnotificationapi.send({\n    notificationId: 'hello_world'\n    user: { id: \"123\", email: \"test@test.com\" },\n    mergeTags: { user }\n})\n"))),(0,o.kt)(s.Z,{value:"python",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'user = {\n    "firstName": "Jane",\n    "lastName": "Doe",\n    "orders": [\n        {\n            "id": "123",\n            "productName": "socks"\n        },\n        {\n            "id": "124",\n            "productName": "socks"\n        }\n    ]\n}\nnotificationapi.send({\n    "notificationId": "hello_world",\n    "user": { "id": "123", "email": "test@test.com" },\n    "mergeTags": { "user": user }\n})\n')))),(0,o.kt)("h2",{id:"options-additional-email-features"},"Options: Additional Email Features"),(0,o.kt)("p",null,"You can dynamically modify certain notification behavior by passing in options. Example:"),(0,o.kt)(l.Z,{groupId:"back-end-language",defaultValue:"nodejs",values:[{label:"Node.js",value:"nodejs"},{label:"Python",value:"python"}],mdxType:"Tabs"},(0,o.kt)(s.Z,{value:"nodejs",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"notificationapi.send({\n    notificationId: 'hello_world'\n    user: { id: \"123\", email: \"test@test.com\" },\n    options: {\n        email: {\n            replyToAddresses: ['noreply@test.com']\n        }\n    }\n})\n"))),(0,o.kt)(s.Z,{value:"python",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'notificationapi.send({\n    "notificationId": "hello_world",\n    "user": { "id": "123", "email": "test@test.com" },\n    "options": { \n            "email": {\n                "replyToAddresses": ["noreply@test.com"]\n            }\n        }\n})\n')))),(0,o.kt)("p",null,"Available options:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"options.email.replyToAddresses")," (string[]): An array of email addresses to be used in the reply-to field of emails notifications."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"options.email.ccAddresses")," (string[]): An array of emails to be CC'ed on the email notifications."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"options.email.bccAddresses")," (string[]): An array of emails to be BCC'ed on the email notifications.")),(0,o.kt)("h2",{id:"retract-unsending-or-deleting-notifications"},"Retract: unsending or deleting notifications"),(0,o.kt)("p",null,"Sometimes you need older notifications to be deleted for a certain user. For example when a notification is not valid anymore. The retract function helps you do this."),(0,o.kt)(l.Z,{groupId:"back-end-language",defaultValue:"nodejs",values:[{label:"Node.js",value:"nodejs"},{label:"Python",value:"python"}],mdxType:"Tabs"},(0,o.kt)(s.Z,{value:"nodejs",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"notificationapi.retract({\n    notificationId: 'hello_world'\n    userId \"123\"\n})\n"))),(0,o.kt)(s.Z,{value:"python",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'notificationapi.retract({\n    "notificationId": "hello_world",\n    "userId": "123"\n})\n')))),(0,o.kt)("p",null,"This function deletes all notifications that were generated from the ",(0,o.kt)("inlineCode",{parentName:"p"},"hello_world")," notification type for user ",(0,o.kt)("inlineCode",{parentName:"p"},"123"),". Optionally, you can filter notifications down to ",(0,o.kt)("a",{parentName:"p",href:"#secondaryid-categorizing-notifications-of-the-same-type"},"secondaryId"),"."),(0,o.kt)("p",null,"Parameters:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"notificationId")," (string)"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"userId")," (string)"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"secondaryId")," (string/optional): when used, only notifications are deleted that were given this secondaryId at send")),(0,o.kt)("p",null,"Please note that this only works with: push, inapp, browser notifications. There is no way to undo emails/sms/voice notifications."),(0,o.kt)("h2",{id:"secondaryid-categorizing-notifications-of-the-same-type"},"SecondaryId: categorizing notifications of the same type"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"secondaryId")," is used toto specify further subcategories within a notification. "),(0,o.kt)("p",null,'Example 1: YouTube generates "new content alert" notifications. ',(0,o.kt)("inlineCode",{parentName:"p"},"secondaryId")," allows categorizing that same notification based on the YouTube channel. "),(0,o.kt)("p",null,'Example 2: In a project management tool, there will be notifications such as "task completed". ',(0,o.kt)("inlineCode",{parentName:"p"},"secondaryId")," can be used to specify which project the notification belongs to."),(0,o.kt)("p",null,"Use-cases:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"You can use the secondaryId in the ",(0,o.kt)("a",{parentName:"li",href:"#retract-unsending-or-deleting-notifications"},"retract function")),(0,o.kt)("li",{parentName:"ul"},"Other use-cases are coming soon")),(0,o.kt)("p",null,"Usage:"),(0,o.kt)(l.Z,{groupId:"back-end-language",defaultValue:"nodejs",values:[{label:"Node.js",value:"nodejs"},{label:"Python",value:"python"}],mdxType:"Tabs"},(0,o.kt)(s.Z,{value:"nodejs",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'notificationapi.send({\n    notificationId: \'hello_world\'\n    user: { id: "123", email: "test@test.com" },\n    secondaryId: "abc"\n})\n'))),(0,o.kt)(s.Z,{value:"python",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'notificationapi.send({\n    "notificationId": "hello_world",\n    "user": { "id": "123", "email": "test@test.com" },\n    "secondaryId": "abc"\n})\n')))))}m.isMDXComponent=!0}}]);